---
title: Step 2 - Infrastructure Setup
description: Build the container infrastructure and networking for your lab
---

import { FileTree } from '@astrojs/starlight/components';

WIP

## Resource Chaining

WIP

## Create the Infrastructure Configuration

The skeleton template doesn't include infrastructure by default. Create a new file `sandbox.hcl` to define your containers and networking:

```hcl showLineNumbers title="sandbox.hcl" {1-4}
# Network - Foundation for all container communication
resource "network" "main" {
  subnet = "10.0.200.0/24"
}
```

WIP

## Add the Web Server Container

Add the nginx container that connects to your network:

```hcl showLineNumbers title="sandbox.hcl" {6-21}
# Network - Foundation for all container communication
resource "network" "main" {
  subnet = "10.0.200.0/24"
}

# Container - nginx web server with network connection
resource "container" "webserver" {
  image {
    name = "nginx:1.25"
  }

  port {
    local = 80    # Port inside the container
  }

  # Resource chaining - connect to network
  network {
    id = resource.network.main.meta.id
  }
}
```

WIP

## Create User Interface Elements

Create the `tabs.hcl` file to define what users will see and interact with:

```hcl showLineNumbers title="tabs.hcl" {1-12}
# Service tab - exposes the nginx web server to users
resource "service" "webserver" {
  target = resource.container.webserver
  port   = 80
  scheme = "http"
}

# Terminal tab - provides command-line access
resource "terminal" "shell" {
  target = resource.container.webserver
  shell = "/bin/bash"
}
```

WIP

## Visualize the Resource Relationships

WIP

## Validate Your Infrastructure

Test that your configuration is syntactically correct:

```bash
instruqt lab validate
```

WIP

## Commit Your Infrastructure

Save your progress to version control:

```bash withOutput
> git add .
```

```bash withOutput
> git commit -m "Add network, container, and UI infrastructure"
[main abc5678] Add network, container, and UI infrastructure
 2 files changed, 20 insertions(+)
 create mode 100644 tabs.hcl
```

```bash withOutput
> git push
```

## What You've Built

WIP

## What's Next

WIP

